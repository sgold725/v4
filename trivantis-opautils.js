
		/*
 * Copyright (C) 2007 Trivantis Corporation
 */

	
function jsOpaUtils(){};jsOpaUtils.createMediaElemPlayer=function (A,B){return triv$(A).mediaelementplayer(B)[0];};function getURLParams(A){A=A||window.location.search;var B={},C=/[?&]?([^=]+)=?([^&]*)/g,D=C.exec(A);while (D){B[decodeURIComponent(D[1])]=decodeURIComponent(D[2]);D=C.exec(A);};return B;};jsOpaUtils.setUpPage=function (A,B){if(A){if(B){if(A.iframe.contentWindow["loadVariables"]) A.iframe.contentWindow["loadVariables"]();if(A.iframe.contentWindow["loadActions"]) A.iframe.contentWindow["loadActions"]();}}};jsOpaUtils.setupPreloadedPage=function (A){if(A){if(A.iframe.contentWindow.location.href.indexOf(A.name)>-1&&A.iframe.contentDocument.readyState=='complete'){jsOpaUtils.setUpPage(A,false);window.removeEventListener("resize",A.iframe.contentWindow.changeSize);jsOpaUtils.stopMedia(A);}else{var B=this;setTimeout(function(){B.setupPreloadedPage(A);},100);}}};jsOpaUtils.completeRCDLoad=function (A){if(A){if(A.iframe.contentWindow.bTrivResponsive){A.iframe.contentWindow.SaveStyles(A);window.addEventListener("resize",A.iframe.contentWindow.changeSize);}}};jsOpaUtils.stopMedia=function (A){if(A){var B=A.iframe.contentWindow.arWnds;if (B) for (var C=0;C<B.length;C++){if (B[C] instanceof jsWndVideo) B[C].stop();if (B[C] instanceof jsWndAudio) B[C].snd.stop();}}};jsOpaUtils.doTransition=function (A,B,C){var D=null;if(typeof(C)!="undefined") D=C;else D=A.transData;A.doTrans(B?1:D.tOut,D.tNum,D.dur,D.fn,D.ol,D.ot,D.fl,D.ft,D.fr,D.fb,D.il,D.eff,D.tb);};jsOpaUtils.remapEventFunctions=function(A){A.addEventListenerORIG=A.addEventListener;A.addEventListener=function(B,C,D,E){A.addEventListenerORIG(B,C,D,E);A.__listeners=A.__listeners||[];A.__listeners.push({ 'type':B,'listener':C });};};jsOpaUtils.createPooledMedia=function(){var A=document.getElementById('mediaPool');function addMedia(I,J){for (var i=0;i<I;i++){var B=document.createElement(J);jsOpaUtils.remapEventFunctions(B);triv$(B).attr('preload','none');triv$(B).attr('playsinline','');triv$(B).attr('trivpool',J+(i+1));var C=document.createElement('source');triv$(C).attr('src','media/blank.mp4');var D=document.createElement('track');triv$(D).attr('srclang','en');triv$(D).attr('kind','subtitles');B.appendChild(C);B.appendChild(D);A.appendChild(B);B.load();}};if (A){var E=window.pooledAudioCnt||0,F=window.pooledVideoCnt||0,G=new Date().getTime(),H;addMedia(E,'audio');addMedia(F,'video');H=new Date().getTime();if (window.console) console.log('Created media pool; audio: '+E+', video: '+F+'; took '+(H-G));};return;};jsOpaUtils.refreshObjects=function(A){if(A.iframe.contentWindow.bPageLoaded&&A.iframe.contentWindow.bLoadedVariables){var B=A.iframe.contentWindow.arObjs;for(var C=0;C<B.length;C++){B[C].refresh();};if(A.iframe.contentWindow["loadActions"]) A.iframe.contentWindow["loadActions"]();}else setTimeout(function(){jsOpaUtils.refreshObjects(A);},100);};jsOpaUtils.rvPage=function(A){if(A.iframe.contentWindow.bPageLoaded&&A.iframe.contentWindow.bLoadedVariables){jsOpaUtils.refreshObjects(A);var B=A.iframe.contentWindow.arObjs;for(var C=0;C<B.length;C++) B[C].rv();A.iframe.contentWindow.writeStyleSheets(B);if(A.iframe.contentWindow["loadActions"]) A.iframe.contentWindow["loadActions"]();}else setTimeout(function(){jsOpaUtils.rvPage(A);},100);};jsOpaUtils.cleanUpDestStr=function(A){if(A){A=A.split(",")[0];A=A.replace("'","");A=A.replace("'","");A=A.trim();};return A;};
